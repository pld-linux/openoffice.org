diff -urN ooo-build-1.1.55.org/bin/build-ooo ooo-build-1.1.55/bin/build-ooo
--- ooo-build-1.1.55.org/bin/build-ooo	2004-05-06 23:22:35.741584000 +0200
+++ ooo-build-1.1.55/bin/build-ooo	2004-05-07 02:13:02.784837104 +0200
@@ -467,7 +467,17 @@
 cd instsetoo || exit 1;
 EXTRA_BUILD_FLAGS=
 if test $BUILD_NCPUS -gt 1; then
-    EXTRA_BUILD_FLAGS=-P$BUILD_NCPUS
+    if test $BUILD_NCPUS -lt 3; then
+	EXTRA_BUILD_FLAGS=-P2
+    elif test $BUILD_NCPUS -lt 7; then
+	# limit to 2/2 only
+	EXTRA_BUILD_FLAGS_PRE="-P2"
+	EXTRA_BUILD_FLAGS_POST="-- -P2"
+    else
+	# limit to 4/4 only
+	EXTRA_BUILD_FLAGS_PRE="-P4"
+	EXTRA_BUILD_FLAGS_POST="-- -P4"
+    fi
 fi
 if test "z$BUILD_WIN32" == "z"; then
     EXTRA_BUILD_FLAGS="$EXTRA_BUILD_FLAGS --dlv_switch link"
@@ -475,7 +485,7 @@
 
 # Accelerate straight-through compiles by not building / using dependencies
 export nodep=1
-perl $SOLARENV/bin/build.pl --all $EXTRA_BUILD_FLAGS || exit 1;
+perl $SOLARENV/bin/build.pl $EXTRA_BUILD_FLAGS_PRE --all $EXTRA_BUILD_FLAGS $EXTRA_BUILD_FLAGS_POST || exit 1;
 
 touch $OOBUILDDIR/$STAMP || exit 1;
 
diff -urN ooo-build-1.1.55.org/patches/OOO_1_1/build-parallel-ooficecfg.patch ooo-build-1.1.55/patches/OOO_1_1/build-parallel-ooficecfg.patch
--- ooo-build-1.1.55.org/patches/OOO_1_1/build-parallel-ooficecfg.patch	1970-01-01 01:00:00.000000000 +0100
+++ ooo-build-1.1.55/patches/OOO_1_1/build-parallel-ooficecfg.patch	2004-05-07 03:46:21.634682552 +0200
@@ -0,0 +1,50 @@
+diff -urN officecfg.org/util/makefile.pmk officecfg/util/makefile.pmk
+--- officecfg.org/util/makefile.pmk	2004-05-07 02:09:08.906392032 +0200
++++ officecfg/util/makefile.pmk	2004-05-07 03:46:13.524915424 +0200
+@@ -119,21 +119,21 @@
+ # xsltproc already validates against the dtd.  For additional validation,
+ # org.openoffice.configuration.Inspector should be replaced and the
+ # replacement should be invoked here.
+-	$(SED) 's|xmlns:filehelper="http://www.jclark.com/xt/java/org.openoffice.configuration.FileHelper"||;s|extension-element-prefixes="filehelper"||;s|filehelper:makeAbs(\(.*\))|\1|' < $(PRJ)$/util$/data_val.xsl > $(PRJ)$/util$/dataval2.xsl
+-	$(SED) 's|xmlns:filehelper="http://www.jclark.com/xt/java/org.openoffice.configuration.FileHelper"||;s|extension-element-prefixes="filehelper"||;s|filehelper:makeAbs(\(.*\))|\1|' < $(PRJ)$/util$/alllang.xsl > $(PRJ)$/util$/alllang2.xsl
++	$(SED) 's|xmlns:filehelper="http://www.jclark.com/xt/java/org.openoffice.configuration.FileHelper"||;s|extension-element-prefixes="filehelper"||;s|filehelper:makeAbs(\(.*\))|\1|' < $(PRJ)$/util$/data_val.xsl > $(PRJ)$/util$/$(<:b)-dataval2.xsl
++	$(SED) 's|xmlns:filehelper="http://www.jclark.com/xt/java/org.openoffice.configuration.FileHelper"||;s|extension-element-prefixes="filehelper"||;s|filehelper:makeAbs(\(.*\))|\1|' < $(PRJ)$/util$/alllang.xsl > $(PRJ)$/util$/$(<:b)-alllang2.xsl
+ 	$(XSLTPROC) -o $(@:d)$(<:b).val \
+ 	            --stringparam xcs $(PWD)$/$(PRJ)$/registry$/schema$/$(<:d)$(<:b).xcs \
+ 	            --stringparam schemaRoot $(PWD)$/$(PRJ)$/registry$/schema \
+-	            $(PRJ)$/util$/dataval2.xsl $<
++	            $(PRJ)$/util$/$(<:b)-dataval2.xsl $<
+ 	$(XSLTPROC) -o $(@:d)$(<:b).tmp \
+ 	            --stringparam xcs $(PWD)$/$(PRJ)$/registry$/schema$/$(<:d)$(<:b).xcs \
+ 	            --stringparam schemaRoot $(PWD)$/$(PRJ)$/registry$/schema \
+-	            $(PRJ)$/util$/alllang2.xsl $<
++	            $(PRJ)$/util$/$(<:b)-alllang2.xsl $<
+ # xsltproc already seems to pretty-print the xml, so
+ # org.openoffice.helper.PrettyPrinter seems to be unnecessary.
+ 	cp $(@:d)$(<:b).tmp $(@:d)$(<:b).xcu
+-	+$(RM) $(PRJ)$/util$/dataval2.xsl > $(NULLDEV)
+-	+$(RM) $(PRJ)$/util$/alllang2.xsl > $(NULLDEV)
++	+$(RM) $(PRJ)$/util$/$(<:b)-dataval2.xsl > $(NULLDEV)
++	+$(RM) $(PRJ)$/util$/$(<:b)-alllang2.xsl > $(NULLDEV)
+ .ENDIF
+ 	+$(RM) $(@:d)$(<:b).tmp > $(NULLDEV)
+ 	+$(RM) $(@:d)$(<:b).val > $(NULLDEV)
+@@ -145,15 +145,15 @@
+ 	$(JAVA) -classpath $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(CLASSDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $< $(PRJ)$/util$/alllang.xsl $(@:d)$(<:b).tmp xcs=$(PRJ)$/registry$/schema$/$(<:d)$(<:b).xcs schemaRoot=$(PRJ)$/registry$/schema locale={$(subst,$/$<, $(subst,$(MISC)$/registry$/res$/, $@))}	
+ 	$(JAVA) -classpath $(SOLARBINDIR)$/jaxp.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(CLASSDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=com.sun.xml.parser.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$(<:b).tmp $(@:d)$(<:b).xcu
+ .ELSE
+-	$(SED) 's|xmlns:filehelper="http://www.jclark.com/xt/java/org.openoffice.configuration.FileHelper"||;s|extension-element-prefixes="filehelper"||;s|filehelper:makeAbs(\(.*\))|\1|' < $(PRJ)$/util$/alllang.xsl > $(PRJ)$/util$/alllang2.xsl
++	$(SED) 's|xmlns:filehelper="http://www.jclark.com/xt/java/org.openoffice.configuration.FileHelper"||;s|extension-element-prefixes="filehelper"||;s|filehelper:makeAbs(\(.*\))|\1|' < $(PRJ)$/util$/alllang.xsl > $(PRJ)$/util$/$(<:b)-{$(subst,$/$<, $(subst,$(MISC)$/registry$/res$/, $@))}-alllang2.xsl
+ 	$(XSLTPROC) -o $(@:d)$(<:b).tmp \
+ 	            --stringparam xcs $(PWD)$/$(PRJ)$/registry$/schema$/$(<:d)$(<:b).xcs \
+ 	            --stringparam schemaRoot $(PWD)$/$(PRJ)$/registry$/schema \
+ 	            --stringparam locale {$(subst,$/$<, $(subst,$(MISC)$/registry$/res$/, $@))} \
+-	            $(PRJ)$/util$/alllang2.xsl $<
++	            $(PRJ)$/util$/$(<:b)-{$(subst,$/$<, $(subst,$(MISC)$/registry$/res$/, $@))}-alllang2.xsl $<
+ # xsltproc already seems to pretty-print the xml, so
+ # org.openoffice.helper.PrettyPrinter seems to be unnecessary.
+ 	cp $(@:d)$(<:b).tmp $(@:d)$(<:b).xcu
+-	+$(RM) $(PRJ)$/util$/alllang2.xsl > $(NULLDEV)
++	+$(RM) $(PRJ)$/util$/$(<:b)-{$(subst,$/$<, $(subst,$(MISC)$/registry$/res$/, $@))}-alllang2.xsl > $(NULLDEV)
+ .ENDIF
+ 	+$(RM) $(@:d)$(<:b).tmp > $(NULLDEV)
diff -urN ooo-build-1.1.55.org/patches/OOO_1_1_1/apply ooo-build-1.1.55/patches/OOO_1_1_1/apply
--- ooo-build-1.1.55.org/patches/OOO_1_1_1/apply	2004-05-06 23:22:36.236508760 +0200
+++ ooo-build-1.1.55/patches/OOO_1_1_1/apply	2004-05-07 02:13:39.606239400 +0200
@@ -666,6 +666,9 @@
 # splash
 pld-splash.diff
 
+# parallel build
+build-parallel-ooficecfg.patch
+
 #######################################################
 [ ArkOnly ]
 
