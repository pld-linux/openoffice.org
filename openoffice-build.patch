diff -urN ooo-build-1.3.5.org/patches/vclplug/vcl-inc.diff ooo-build-1.3.5/patches/vclplug/vcl-inc.diff
--- ooo-build-1.3.5.org/patches/vclplug/vcl-inc.diff	2004-08-12 06:10:37.000000000 +0200
+++ ooo-build-1.3.5/patches/vclplug/vcl-inc.diff	2004-10-07 21:50:17.348643274 +0200
@@ -1644,112 +1644,6 @@
  
      GDIMetaFile&    operator=( const GDIMetaFile& rMtf );
  	BOOL			operator==( const GDIMetaFile& rMtf ) const;
-Index: vcl/inc/glyphcache.hxx
-===================================================================
-RCS file: /cvs/gsl/vcl/inc/glyphcache.hxx,v
-retrieving revision 1.19
-retrieving revision 1.22
-diff -u -p -u -r1.19 -r1.22
---- vcl/inc/glyphcache.hxx	2 Jul 2003 13:38:54 -0000	1.19
-+++ vcl/inc/glyphcache.hxx	18 May 2004 10:48:36 -0000	1.22
-@@ -72,6 +72,7 @@ class ServerFontLayout;
- 
- #include <tools/gen.hxx>
- #include <hash_map>
-+#include <map>
- #include <hash_set>
- 
- struct ImplFontSelectData;
-@@ -90,14 +91,20 @@ bool operator==( const ImplFontSelectDat
- 
- // =======================================================================
- 
-+namespace std {
- template<>
--struct std::hash<ImplFontSelectData> 
-+struct hash<ImplFontSelectData> 
- {
-     size_t operator()( const ImplFontSelectData& ) const;
- };
- 
-+}
-+
- //--------
- 
-+typedef std::map< sal_Unicode, std::map< sal_Unicode, int > > unicodeKernMap;
-+typedef std::map< int, std::map< int, int > > glyphKernMap;
-+
- class GlyphCache
- {
- public:
-@@ -110,7 +117,11 @@ public:
-     void                        ClearFontPath();
-     void                        AddFontPath( const String& rFontPath );
-     void                        AddFontFile( const rtl::OString& rNormalizedName,
--                                    int nFaceNum, int nFontId, const ImplFontData* );
-+                                             int nFaceNum,
-+                                             int nFontId,
-+                                             const ImplFontData*,
-+                                             const unicodeKernMap* pUniKernPairs = NULL
-+                                             );
-     long                        FetchFontList( ImplDevFontList* ) const;
- 
-     ServerFont*                 CacheFont( const ImplFontSelectData& );
-@@ -118,7 +129,7 @@ public:
-     void                        RemoveFont( const ImplFontData* );
- 
- private:
--friend ServerFont;
-+    friend class ServerFont;
-     // used by ServerFont class only
-     void                        AddedGlyph( ServerFont& rServerFont, GlyphData& rGlyphData );
-     void                        RemovingGlyph( ServerFont& rSF, GlyphData& rGD, int nGlyphIndex );
-@@ -156,7 +167,7 @@ public:
-     long                    GetCharWidth() const { return mnAdvanceWidth; }
- 
- protected:
--friend class GlyphData;
-+    friend class GlyphData;
-     void                    SetOffset( int nX, int nY ) { maOffset = Point( nX, nY); }
-     void                    SetDelta( int nX, int nY )  { maDelta = Point( nX, nY); }
-     void                    SetSize( const Size& s )    { maSize = s; }
-@@ -218,8 +229,8 @@ public:
-     const ImplFontSelectData&   GetFontSelData() const      { return maFontSelData; }
- 
-     virtual void                FetchFontMetric( ImplFontMetricData&, long& rFactor ) const = 0;
--    virtual ULONG               GetKernPairs( struct ImplKernPairData** ) const = 0;
--    virtual int                 GetGlyphKernValue( int, int ) const = 0;
-+    virtual ULONG               GetKernPairs( struct ImplKernPairData** ) const;
-+    virtual int                 GetGlyphKernValue( int, int ) const;
-     virtual ULONG               GetFontCodeRanges( sal_uInt32* pCodes ) const { return 0; }
-     Point                       TransformPoint( const Point& ) const;
- 
-@@ -238,9 +249,9 @@ public:
-     void*                       GetExtPointer() { return mpExtData; }
- 
- protected:
--friend GlyphCache;
--friend ServerFontLayout;
--                                ServerFont( const ImplFontSelectData& );
-+    friend class GlyphCache;
-+    friend class ServerFontLayout;
-+                                ServerFont( const ImplFontSelectData&, const glyphKernMap* pGlyphKern = NULL, const unicodeKernMap* pUniKern = NULL  );
-     virtual                     ~ServerFont();
- 
-     void                        AddRef() const      { ++mnRefCount; }
-@@ -273,6 +284,12 @@ private:
- protected:
-     long                        nCos;
-     long                        nSin;
-+
-+    // maps left glyph id to map of right glyphid
-+    // the inner map maps right glyphid to kern value
-+    const glyphKernMap*			mpKernPairs;
-+    const unicodeKernMap*		mpUnicodeKernPairs;
-+
- };
- 
- // =======================================================================
 Index: vcl/inc/gradient.hxx
 ===================================================================
 RCS file: /cvs/gsl/vcl/inc/gradient.hxx,v
