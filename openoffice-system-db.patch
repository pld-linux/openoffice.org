--- oo_1.0_src/setup2/script/linux/1.0.0/webinstdb.inf.systemdb	Fri May 31 17:46:36 2002
+++ oo_1.0_src/setup2/script/linux/1.0.0/webinstdb.inf	Fri May 31 17:47:08 2002
@@ -6687,7 +6687,7 @@
 End
 
 File gid_File_Lib_Db31
-	Name		 = "libdb-3.1.so";
+	Name		 = "libdb-4.0.so";
 	PackedName	 = "f_0352";
 	Size		 = 458008;
 	Dir			 = gid_Dir_Program;
@@ -6700,7 +6700,7 @@
 End
 
 File gid_File_Lib_Dbjava31
-	Name		 = "libdb_java-3.1.so";
+	Name		 = "libdb_java-4.0.so";
 	PackedName	 = "f_0353";
 	Size		 = 506820;
 	Dir			 = gid_Dir_Program;
--- oo_1.0_src/setup2/script/linux/1.0.1/webinstdb.inf.systemdb	Fri May 31 17:47:16 2002
+++ oo_1.0_src/setup2/script/linux/1.0.1/webinstdb.inf	Fri May 31 17:47:27 2002
@@ -7474,7 +7474,7 @@
 End
 
 File gid_File_Lib_Db31
-	Name		 = "libdb-3.1.so";
+	Name		 = "libdb-4.0.so";
 	PackedName	 = "f_0358";
 	Size		 = 458008;
 	DownloadSize = 196814;
@@ -7488,7 +7488,7 @@
 End
 
 File gid_File_Lib_Dbjava31
-	Name		 = "libdb_java-3.1.so";
+	Name		 = "libdb_java-4.0.so";
 	PackedName	 = "f_0359";
 	Size		 = 506820;
 	DownloadSize = 212931;
--- oo_1.0_src/setup2/script/linux/1.1.1/webinstdb.inf.systemdb	Fri May 31 17:47:37 2002
+++ oo_1.0_src/setup2/script/linux/1.1.1/webinstdb.inf	Fri May 31 17:47:48 2002
@@ -7512,7 +7512,7 @@
 End
 
 File gid_File_Lib_Db31
-	Name		 = "libdb-3.1.so";
+	Name		 = "libdb-4.0.so";
 	PackedName	 = "f_0361";
 	Size		 = 458008;
 	DownloadSize = 196814;
@@ -7526,7 +7526,7 @@
 End
 
 File gid_File_Lib_Dbjava31
-	Name		 = "libdb_java-3.1.so";
+	Name		 = "libdb_java-4.0.so";
 	PackedName	 = "f_0362";
 	Size		 = 506820;
 	DownloadSize = 212931;
--- oo_1.0_src/scp/source/office/files.scp.systemdb	Fri May 31 17:43:01 2002
+++ oo_1.0_src/scp/source/office/files.scp	Fri May 31 17:43:37 2002
@@ -994,7 +994,7 @@
         Styles          = (PACKED);
         Dir             = GID_DIR_PROGRAM;
         #ifdef UNX
-        Name            = "libdb-3.2.so";
+        Name            = "libdb-4.0.so";
         #else
         Name            = "libdb32.dll";
         #endif
@@ -1007,7 +1007,7 @@
         Styles          = (PACKED);
         Dir             = GID_DIR_PROGRAM;
         #ifdef UNX
-        Name            = "libdb_java-3.2.so";
+        Name            = "libdb_java-4.0.so";
         #else
         Name            = "libdb_java32.dll";
         #endif
@@ -1021,7 +1021,7 @@
         BIN_FILE_BODY;
         Styles          = (PACKED);
         Dir             = GID_DIR_PROGRAM;
-        Name            = "libdb_cxx-3.2.so";
+        Name            = "libdb_cxx-4.0.so";
 End
 
 #endif
--- oo_1.0_src/solenv/inc/libs.mk.systemdb	Fri May 31 17:43:57 2002
+++ oo_1.0_src/solenv/inc/libs.mk	Fri May 31 17:45:32 2002
@@ -169,8 +169,8 @@
 ZLIB3RDLIB=-lzlib
 JPEG3RDLIB=-ljpeglib
 NEON3RDLIB=-lneon
-BERKELEYLIB=-ldb-3.2
-BERKELEYCPPLIB=-ldb_cxx-3.2
+BERKELEYLIB=-ldb-4.0
+BERKELEYCPPLIB=-ldb_cxx-4.0
 SFX2LIB=-lsfx$(UPD)$(DLLPOSTFIX)
 SFXLIB=-lsfx$(UPD)$(DLLPOSTFIX)
 SFXDEBUGLIB=
--- oo_1.0_src/berkeleydb/prj/d.lst.systemdb	Fri May 31 17:38:58 2002
+++ oo_1.0_src/berkeleydb/prj/d.lst	Fri May 31 17:42:14 2002
@@ -1,18 +1,20 @@
 mkdir: %_DEST%\inc%_EXT%\berkeleydb
 
-..\%__SRC%\inc\db_cxx.h %_DEST%\inc%_EXT%\berkeleydb\db_cxx.h
-..\%__SRC%\inc\db_185.h %_DEST%\inc%_EXT%\berkeleydb\db_185.h
-..\%__SRC%\inc\db.h %_DEST%\inc%_EXT%\berkeleydb\db.h
+\usr\include\db4\db_cxx.h %_DEST%\inc%_EXT%\berkeleydb\db_cxx.h
+\usr\include\db4\cxx_common.h %_DEST%\inc%_EXT%\berkeleydb\cxx_common.h
+\usr\include\db4\cxx_except.h %_DEST%\inc%_EXT%\berkeleydb\cxx_except.h
+\usr\include\db4\db_185.h %_DEST%\inc%_EXT%\berkeleydb\db_185.h
+\usr\include\db4\db.h %_DEST%\inc%_EXT%\berkeleydb\db.h
 
 ..\%__SRC%\lib\libdb32.lib %_DEST%\lib%_EXT%\libdb32.lib
 ..\%__SRC%\lib\libdb_java32.lib %_DEST%\lib%_EXT%\libdb_java32.lib
 
-..\%__SRC%\lib\libdb-3.2.so %_DEST%\lib%_EXT%\libdb-3.2.so
-..\%__SRC%\lib\libdb_java-3.2.so %_DEST%\lib%_EXT%\libdb_java-3.2.so
-..\%__SRC%\lib\libdb_cxx-3.2.so %_DEST%\lib%_EXT%\libdb_cxx-3.2.so
+\lib\libdb-4.0.so %_DEST%\lib%_EXT%\libdb-4.0.so
+\usr\lib\libdb_java-4.0.so %_DEST%\lib%_EXT%\libdb_java-4.0.so
+\usr\lib\libdb_cxx-4.0.so %_DEST%\lib%_EXT%\libdb_cxx-4.0.so
 
 ..\%__SRC%\bin\libdb32.dll %_DEST%\bin%_EXT%\libdb32.dll
 ..\%__SRC%\bin\libdb_java32.dll %_DEST%\bin%_EXT%\libdb_java32.dll
 
-..\%__SRC%\bin\db.jar %_DEST%\bin%_EXT%\db.jar
+\usr\share\java\db.jar %_DEST%\bin%_EXT%\db.jar
 
--- oo_1.0_src/berkeleydb/makefile.mk.systemdb	Fri May 31 17:34:42 2002
+++ oo_1.0_src/berkeleydb/makefile.mk	Fri May 31 17:38:51 2002
@@ -65,6 +65,16 @@
 PRJNAME=so_berkeleydb
 TARGET=so_berkeleydb
 
+# --- Hack to get system db libraries ------------------------------
+.IF "$(GUI)"=="UNX"
+all:
+	@echo "Since you're running a real OS, we're assuming you have db..."
+	+$(COPY) /lib$/libdb-4.0.so $(DLLDEST)
+	+$(COPY) /usr$/lib$/libdb_cxx-4.0.so $(DLLDEST)
+	+$(COPY) /usr$/lib$/libdb_java-4.0.so $(DLLDEST)
+	+$(COPY) /usr$/share$/java$/db.jar $(DLLDEST)
+.ENDIF
+
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :	settings.mk
